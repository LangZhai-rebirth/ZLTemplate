String.prototype.replaceAll=function(t,e,n){return RegExp.prototype.isPrototypeOf(t)?this.replace(t,e):this.replace(RegExp(t,n?"gi":"g"),e)},function($){$.fn.template=function(data,options){var $this=$(this),binds,val,result,nestedCol,nested={};return options=options||{},data instanceof Array?(result="",$.each(data,function(t,e){result+=$this.template(e,options)})):(result=$this.html(),options.rule=options.rule||/#{(.(?!#{))*[^\n\r\f\t\v\0]}/g,binds=result.match(options.rule),binds&&(data instanceof Object&&options.nested&&(options.nested instanceof Array?options.nested.length&&(options.nested=$.map(options.nested,function(t){return t instanceof $?t:$(t)})):"string"==typeof options.nested?options.nested.length&&(options.nested=$.map(options.nested.split(","),function(t){return $(t)})):options.nested instanceof $?options.nested=options.nested.map(function(){return $(this)}):options.nested=[],options.nested.length&&$.each(options.nested,function(t,e){nestedCol=e.data("nested"),nested[e.data("alias")||nestedCol]=e.template(data[nestedCol],options)})),$.each(binds,function(i,item){val=item.substring(2),val="val="+val.substring(0,val.length-1).replaceAll("&amp;","&").replaceAll("&gt;",">").replaceAll("&lt;","<");try{eval(val)}catch(err){val=void 0}void 0!==val?result=result.replace(item,val):(void 0===options.clean||options.clean)&&(result=result.replace(item,""))}))),result}}($);